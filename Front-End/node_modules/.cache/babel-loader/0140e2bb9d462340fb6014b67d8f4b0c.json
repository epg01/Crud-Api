{"ast":null,"code":"var _jsxFileName = \"/home/sixtan/work/src/PruebaTecnica/Front-End/src/components/CrudApi.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { helpHttp } from \"../helper/helpHttp\";\nimport CrudForm from \"./CrudForm\";\nimport CrudTable from \"./CrudTable\";\nimport Loader from \"./Loader\";\nimport Message from \"./Message\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CrudApi = () => {\n  _s();\n\n  const [db, setDb] = useState(null);\n  const [dataToEdit, setDataToEdit] = useState(null);\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n  let api = helpHttp();\n  let url = \"http://localhost:8000\"; //mi enpoint\n  //se ejecuta la primera vez unicamente\n\n  useEffect(() => {\n    setLoading(true);\n    helpHttp().get(url).then(res => {\n      console.log(res);\n\n      if (!res.err) {\n        setDb(res);\n        console.log(res);\n        setError(null);\n      } else {\n        setDb(null);\n        setError(res);\n      }\n\n      setLoading(false);\n    });\n  }, [url]);\n\n  const createData = data => {\n    let options = {\n      body: data,\n      headers: {\n        \"content-type\": \"application/json\"\n      }\n    };\n    api.post(url, options).then(res => {\n      if (!res.err) {\n        console.log(\"desde el post\");\n        setDb([...db, res]);\n      } else {\n        setError(res);\n      }\n    });\n  };\n\n  const updateData = data => {\n    let endPoint = `${url}/${data.ID}`;\n    console.log(data.ID);\n    let options = {\n      body: data,\n      headers: {\n        \"content-type\": \"application/json\"\n      }\n    };\n    api.put(endPoint, options).then(res => {\n      console.log(res);\n\n      if (!res.err) {\n        let newData = db.map(el => el.ID === data.ID ? data : el);\n        setDb(newData);\n        console.log(\"desde el put\");\n      } else {\n        setError(res);\n      }\n    });\n  };\n\n  const deleteData = id => {\n    let isDelete = window.confirm(`¿estás seguro de su eliminación del usuario '${id}'?`);\n\n    if (isDelete) {\n      let endPoint = `${url}/${id}`;\n      console.log(endPoint);\n      let options = {\n        headers: {\n          \"content-type\": \"application/json\"\n        }\n      };\n      api.del(endPoint, options).then(res => {\n        if (!res.err) {\n          let newData = db.filter(el => el.ID !== id);\n          setDb(newData);\n        } else {\n          setError(res);\n        }\n      });\n    } else {\n      return;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"article\", {\n      children: [/*#__PURE__*/_jsxDEV(CrudForm, {\n        createData: createData,\n        updateData: updateData,\n        dataToEdit: dataToEdit,\n        setDataToEdit: setDataToEdit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), loading && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 21\n      }, this), error && /*#__PURE__*/_jsxDEV(Message, {\n        msg: `Error ${error.status}: ${error.statusText}`,\n        bgColor: \"#dc3545\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }, this), db && /*#__PURE__*/_jsxDEV(CrudTable, {\n        data: db,\n        setDataToEdit: setDataToEdit,\n        deleteData: deleteData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CrudApi, \"DyX+YwxBxG9WDWSVG/eD4NMTMpI=\");\n\n_c = CrudApi;\nexport default CrudApi;\n\nvar _c;\n\n$RefreshReg$(_c, \"CrudApi\");","map":{"version":3,"sources":["/home/sixtan/work/src/PruebaTecnica/Front-End/src/components/CrudApi.js"],"names":["React","useState","useEffect","helpHttp","CrudForm","CrudTable","Loader","Message","CrudApi","db","setDb","dataToEdit","setDataToEdit","error","setError","loading","setLoading","api","url","get","then","res","console","log","err","createData","data","options","body","headers","post","updateData","endPoint","ID","put","newData","map","el","deleteData","id","isDelete","window","confirm","del","filter","status","statusText"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { helpHttp } from \"../helper/helpHttp\";\n\nimport CrudForm from \"./CrudForm\";\nimport CrudTable from \"./CrudTable\";\nimport Loader from \"./Loader\";\nimport Message from \"./Message\";\n\nconst CrudApi = () => {\n  const [db, setDb] = useState(null);\n  const [dataToEdit, setDataToEdit] = useState(null);\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  let api = helpHttp();\n  let url = \"http://localhost:8000\"; //mi enpoint\n\n  //se ejecuta la primera vez unicamente\n  useEffect(() => {\n    setLoading(true);\n    helpHttp()\n      .get(url)\n      .then((res) => {\n        console.log(res);\n        if (!res.err) {\n          setDb(res);\n          console.log(res);\n\n          setError(null);\n        } else {\n          setDb(null);\n          setError(res);\n        }\n        setLoading(false);\n      });\n  }, [url]);\n\n  const createData = (data) => {\n\n    let options = {\n      body: data,\n      headers: { \"content-type\": \"application/json\" },\n    };\n    api.post(url, options).then((res) => {\n\n      if (!res.err) {\n        console.log(\"desde el post\");\n        setDb([...db, res]);\n      } else {\n        setError(res);\n      }\n    });\n  };\n\n  const updateData = (data) => {\n    let endPoint = `${url}/${data.ID}`;\n      console.log(data.ID)\n\n    let options = {\n      body: data,\n      headers: { \"content-type\": \"application/json\" },\n    };\n    api.put(endPoint, options).then((res) => {\n      console.log(res);\n      if (!res.err) {\n        let newData = db.map((el) => (el.ID === data.ID ? data : el));\n        setDb(newData);\n        console.log(\"desde el put\");\n\n      } else {\n        setError(res);\n      }\n    });\n\n  };\n\n  const deleteData = (id) => {\n    let isDelete = window.confirm(`¿estás seguro de su eliminación del usuario '${id}'?`);\n\n    if (isDelete) {\n      let endPoint = `${url}/${id}`;\n      console.log(endPoint);\n      let options = {\n        headers: { \"content-type\": \"application/json\" },\n      };\n\n      api.del(endPoint, options).then((res) => {\n        if (!res.err) {\n          let newData = db.filter((el) => el.ID !== id);\n          setDb(newData);\n        } else {\n          setError(res);\n        }\n      });\n    } else {\n      return;\n    }\n  };\n\n  return (\n    <div>\n      <article>\n        <CrudForm\n          createData={createData}\n          updateData={updateData}\n          dataToEdit={dataToEdit}\n          setDataToEdit={setDataToEdit}\n        />\n        {loading && <Loader />}\n        {error && (\n          <Message\n            msg={`Error ${error.status}: ${error.statusText}`}\n            bgColor=\"#dc3545\"\n          />\n        )}\n        {db && (\n          <CrudTable\n            data={db}\n            setDataToEdit={setDataToEdit}\n            deleteData={deleteData}\n          />\n        )}\n      </article>\n    </div>\n  );\n};\n\nexport default CrudApi;\n"]},"metadata":{},"sourceType":"module"}